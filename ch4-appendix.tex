\documentclass[1-ambra-tesi.tex]{subfiles}
 
\begin{document}
\begin{appendices}
\label{appendix}

% ================================================== appendix

\chapter{Something extra}
\label{app:extra}
\lipsum[1]

\begin{figure}[ht]
\centering
\begin{lstlisting}[language=Python, label={code:example}, caption={Fancy code.}]
import mylib

class MyClass()
    def __init__(self) --> None
        pass
        
    def MyMethod(self, x):
        x += 1
        return x 
        
print("some code example")
\end{lstlisting}
\end{figure}

\lipsum[2]

Refer to code example: Listing~\ref{code:example}


\end{appendices}
\end{document}

